<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:Mobile.ViewModels"
             x:Class="Mobile.Pages.CredentialPage"
             x:DataType="viewmodels:CredentialViewModel"
             Title="{Binding Title}">

    <VerticalStackLayout Padding="20" Spacing="30" VerticalOptions="Center">

        <!-- Connectivity Status at the top -->
        <Frame BackgroundColor="{Binding ConnectivityStatusColor}" 
               Padding="15" 
               CornerRadius="10"
               HasShadow="True">
            <HorizontalStackLayout Spacing="10" HorizontalOptions="Center">
                <Label Text="{Binding ConnectivityStatusIcon}" 
                       FontSize="20"
                       VerticalOptions="Center"/>
                <Label Text="{Binding ConnectivityStatusText}" 
                       FontSize="18"
                       FontAttributes="Bold"
                       TextColor="White"
                       VerticalOptions="Center"/>
            </HorizontalStackLayout>
        </Frame>

        <!-- Main Credential Card -->
        <Frame BackgroundColor="{StaticResource Primary}" 
               Padding="40" 
               CornerRadius="20"
               HasShadow="True"
               VerticalOptions="Center">
            <VerticalStackLayout Spacing="20">
                <Label Text="ðŸªª" 
                       FontSize="80" 
                       HorizontalOptions="Center"/>
                
                <Label Text="Credencial Digital" 
                       FontSize="24" 
                       FontAttributes="Bold"
                       HorizontalOptions="Center"
                       TextColor="White"/>
                
                <Label Text="{Binding UserName}" 
                       FontSize="20"
                       HorizontalOptions="Center"
                       TextColor="White"/>
                
                <BoxView HeightRequest="1" Color="White" Opacity="0.3" Margin="0,10"/>
                
                <Label Text="{Binding StatusMessage}" 
                       FontSize="14"
                       HorizontalOptions="Center"
                       HorizontalTextAlignment="Center"
                       TextColor="White"
                       Opacity="0.9"
                       LineBreakMode="WordWrap"/>
            </VerticalStackLayout>
        </Frame>

        <!-- Single Action Button -->
        <Button Text="{Binding ActivationButtonText}" 
                Command="{Binding ToggleEmulationCommand}"
                IsEnabled="{Binding IsBusy, Converter={StaticResource InvertedBoolConverter}}"
                BackgroundColor="{Binding ActivationButtonColor}"
                TextColor="White"
                FontSize="20"
                FontAttributes="Bold"
                HeightRequest="60"
                CornerRadius="15"/>

    </VerticalStackLayout>

</ContentPage>

@* Menú de usuario con dropdown para login/logout *@
@inject NavigationManager Navigation

<div class="user-menu">
    @if (isLoggedIn)
    {
        <div class="dropdown">
            <button class="btn btn-link user-button" type="button" id="userMenuDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="bi bi-person-circle"></i>
                <span class="user-name d-none d-md-inline">@userName</span>
            </button>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userMenuDropdown">
                <li><a class="dropdown-item" href="/profile"><i class="bi bi-person"></i> Mi Perfil</a></li>
                <li><a class="dropdown-item" href="/access-history"><i class="bi bi-clock-history"></i> Historial</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" @onclick="Logout" href="javascript:void(0)"><i class="bi bi-box-arrow-right"></i> Cerrar Sesión</a></li>
            </ul>
        </div>
    }
    else
    {
        <button class="btn btn-primary" @onclick="NavigateToLogin">
            <i class="bi bi-box-arrow-in-right"></i>
            <span class="d-none d-md-inline ms-1">Iniciar Sesión</span>
        </button>
    }
</div>

@code {
    private bool isLoggedIn = false;
    private string userName = "Usuario";

    private void NavigateToLogin()
    {
        Navigation.NavigateTo("/login");
    }

    private void Logout()
    {
        isLoggedIn = false;
        userName = "Usuario";
    }

    protected override void OnInitialized()
    {
        isLoggedIn = false;
        userName = "Juan Pérez";
    }
}
